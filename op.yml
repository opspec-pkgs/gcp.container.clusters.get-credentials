name: github.com/opspec-pkgs/gcp.k8s-engine.get-kubeconfig
description: |
  gets a kubeconfig file for a google cloud platform k8s engine cluster
  > note: auth in the returned file will be valid for 1hr
inputs:
  clusterName:
    string:
      description: name of k8s engine cluster
  keyFile:
    file:
      description: key file for a GCP service account w/ `Kubernetes Engine Developer` role
      isSecret: true
  projectId:
    string:
      description: id of the GCP project containing the k8s engine cluster
  zone:
    string:
      description: zone of the k8s engine cluster
outputs:
  kubeConfig:
    file:
      description: the kube config
version: 1.1.0
run:
  container:
    image: { ref: 'opspecpkgs/gcp.k8s-engine.get-kubeconfig:1.1.0' }
    files:
      /cmd.sh:
      /keyFile: $(keyFile)
      /kubeConfig: $(kubeConfig)
    cmd: [ /cmd.sh ]
    envVars:
      clusterName:
      projectId:
      zone: